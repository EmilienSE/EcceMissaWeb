<div class="modal-header">
    <h2>Modifier un feuillet</h2>
    <div class="close-btn" (click)="close()"><img src="assets/img/close.svg" alt=""></div>
</div>
@if (isLoading) {
    <app-em-loader></app-em-loader>
} @else {
    <form class="modal-form" [formGroup]="editFeuilletForm">
        <div class="form-group">
            <label for="celebrationDate">Date de la célébration :</label>
            <input type="date" name="celebrationDate" id="celebrationDate" class="em-input" [formControlName]="'celebration_date'">
        </div>
        <div class="form-group">
            <label for="paroisse">Paroisse :</label>
            <select name="paroisse" id="paroisse" class="em-input" [formControlName]="'paroisse_id'">
                <option *ngFor="let paroisse of paroisses" [value]="paroisse.id">{{paroisse.nom}}</option>
            </select>
        </div>
        <div class="form-group">
            <label for="eglise">Église :</label>
            <select name="eglise" id="eglise" class="em-input" [formControlName]="'eglise_id'">
                <option *ngFor="let eglise of eglises" [value]="eglise.id">{{eglise.nom}}</option>
            </select>
        </div>
        <div class="form-group">
            <label for="fichier">Fichier :</label>
            <input type="file" name="fichier" id="fichier" class="em-input" (change)="handleFileInput($event)">
            <label for="fichier" class="em-input-file" id="em-input-file">{{ fileName ? fileName : 'Choisissez un fichier...'}}</label>
        </div>
    </form>
    <div class="modal-footer">
        <button class="em-btn" (click)="modalService.close()"><span>Annuler</span></button>
        <button class="em-btn success" [disabled]="!editFeuilletForm.valid" (click)="submitForm().subscribe()"><span>Ajouter</span></button>
    </div>
}

